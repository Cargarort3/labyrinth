{% extends 'base.html' %}

{% block title %}My Labyrinths{% endblock %}

{% block content %}
    <h1>My Labyrinths</h1>

    {% if labyrinths %}
        <ul>
            {% for lab in labyrinths %}
                <li>
                    <strong>
                        <a href="{{ url_for('labyrinth.get_labyrinth', id=lab.id) }}">
                            {{ lab.title }}
                        </a>
                    </strong><br>
                    Description: {{ lab.description }}<br>
                    Size: {{ lab.matrix|length }} x {{ lab.matrix[0]|length }}<br>
                    Start: {{ lab.start }}<br>
                    End: {{ lab.end }}
                </li>
                <button onclick="deleteLabyrinth('{{ lab.id }}')">Delete</button>
            {% endfor %}
        </ul>
    {% else %}
        <p>No labyrinths found.</p>
    {% endif %}
{% endblock %}

{% block scripts %}
<script>
    function deleteLabyrinth(id) {
        if (!confirm("Are you sure you want to delete this labyrinth?")) return;

        fetch(`/labyrinth/${id}`, {
            method: "DELETE",
            headers: {
                "Content-Type": "application/json"
            }
        })
        .then(response => {
            if (response.ok) {
                location.reload();
            }
        })
    }
</script>
{% endblock %}